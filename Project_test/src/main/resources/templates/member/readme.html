<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/style/main.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<title>내 정보 수정</title>
</head>
<body>
    <div id="app">
        <header th:replace="~{/fragment/header.html}"></header>
        <nav th:replace="~{/fragment/nav.html}"></nav>
        <main>
            <section>
            <form>
                    <div class="mb-3 mt-3">
                        <label for="name" class="form-label">이름:</label>
                        <input type="text" class="form-control" id="name" name="name" th:value="${result.name}">
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="email" class="form-label">이메일:</label>
                        <input type="email" class="form-control" id="email" name="email" th:value="${result.email}">
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="phone" class="form-label">전화번호:</label>
                        <input type="tel" class="form-control" id="phone" name="phone" th:value="${result.phone}">
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="new-password" class="form-label">비밀번호:</label>
                        <a type="button" class="btn btn-primary" href="/member/update-password">비밀번호 변경</a>
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="joinday" class="form-label">가입정보:</label>
                        <p th:text="${result.joinday}"></p>
                    </div>

                    <button id="update" class="btn btn-success">변경</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button type="button" id="delete" class="btn btn-danger">삭제</button>
                </form>
            </section>
        </main>
    </div>

    <script>
        $('#delete').click(function() {
            const token = '[[${_csrf.token}]]';
            const form = `
                <form action="/member/withdraw" method="post">
                    <input type="hidden" name="_csrf" value="${token}">
                </form>
            `;
            $(form).appendTo($('body')).submit();
        });
    </script>    
</body>
</html>
