<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/style/main.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/script/inputFunction.js"></script>
<title>주문 상세 페이지</title>
</head>
<body>
	<div id="app">
		<header th:replace="~{/fragment/header.html}"> </header>
		<nav th:replace="~{/fragment/nav.html}"></nav>
		<main>
			<section class="container mt-5">
				<h1 class="mb-4">주문 상세 페이지</h1>

				<div th:if="${result != null}">
					<!-- 주문 정보 -->
					<div class="card mb-3">
						<div class="card-header">주문 정보</div>
						<div class="card-body">
							<p><strong>주문 번호:</strong> <span th:text="${result.orderNo}"></span></p>
							<p><strong>주문 날짜:</strong> <span th:text="${result.orderDate}"></span></p>
							<p><strong>주문 상태:</strong> <span th:text="${result.orderStatus}"></span></p>
							<p><strong>총 가격:</strong> <span th:text="${result.totalPrice}"></span>원</p>
							<p><strong>사용 포인트:</strong> <span th:text="${result.usedPoint}"></span>점</p>
							<p><strong>실제 결제 금액:</strong> <span th:text="${result.actPayment}"></span>원</p>
							<p><strong>사용자 이름:</strong> <span th:text="${result.memberUsername}"></span></p>
							<p><strong>우편 번호:</strong> <span th:text="${result.postNo}"></span></p>
						</div>
					</div>

					<!-- 주문 상세 항목 -->
					<div class="card mb-3">
						<div class="card-header">주문 상세 항목</div>
						<div class="card-body">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th>상품 번호</th>
										<th>상품 이름</th>
										<th>이미지</th>
										<th>수량</th>
										<th>가격</th>
										<th>리뷰 작성 여부</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="detail : ${result.orderDetails}">
										<td th:text="${detail.itemNo}"></td>
										<td th:text="${detail.itemName}"></td>
										<td><img th:src="${detail.image}" alt="상품 이미지" style="width: 100px;"></td>
										<td th:text="${detail.detailEa}"></td>
										<td th:text="${detail.price}"></td>
										<td th:text="${detail.reviewWritten == 'Y' ? '작성됨' : '미작성'}"></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>

					<!-- 결제 정보 -->
					<div class="card mb-3">
						<div class="card-header">결제 정보</div>
						<div class="card-body">
							<p><strong>결제 수단:</strong> <span th:text="${result.payment.payMethod}"></span></p>
							<p><strong>포인트 적립:</strong> <span th:text="${result.payment.pointAdd}"></span>점</p>
							<p><strong>카드 번호:</strong> <span th:text="${result.payment.cardNo}"></span></p>
						</div>
					</div>
				</div>

				<div th:if="${result == null}">
					<p>주문 정보를 찾을 수 없습니다.</p>
				</div>
			</section>
		</main>
		<footer th:replace="~{/fragment/footer.html}"> </footer>
	</div>
</body>
</html>
