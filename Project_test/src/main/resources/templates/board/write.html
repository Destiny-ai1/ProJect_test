<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/style/main.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.ckeditor.com/ckeditor5/36.0.1/classic/ckeditor.js"></script>
<style>
    .ck-editor__editable_inline:not(.ck-comment__input *) {
        height: 600px;
        overflow-y: auto;
    }
</style>
<title th:text="${boardType} + ' 작성하기'">게시글 작성</title>
</head>
<body>
    <div id="app" class="container mt-4">
        <header th:replace="~{/fragment/header.html}"></header>
        <nav th:replace="~{/fragment/nav.html}"></nav>
        <main>
            <section class="mt-4">
                <h2 th:text="${boardType} + ' 작성하기'"></h2>
                <form th:action="@{'/board/write/' + ${boardType} + '.html'}" method="post">
                    <input type="hidden" name="_csrf" th:value="${_csrf.token}">
                    <div class="mb-3">
                        <label for="title" class="form-label">제목</label>
                        <input type="text" id="title" name="title" class="form-control" placeholder="제목을 입력하세요">
                    </div>
                    <div class="mb-3">
                        <label for="content" class="form-label">내용</label>
                        <textarea id="content" name="content" class="form-control"></textarea>
                    </div>
                    <div class="mb-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="secret" name="secret">
                            <label class="form-check-label" for="secret">비밀글로 설정</label>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">작성</button>
                </form>
            </section>
        </main>
        <footer th:replace="~{/fragment/footer.html}"></footer>
    </div>
    <script>
        // ckeditor 초기화 함수
        async function initEditor() {
            try {
                editor = await ClassicEditor.create(document.getElementById('content'), {
                    ckfinder: {
                        uploadUrl: '/api/boards/image'
                    }
                });
            } catch(err) {
                console.log(err);
            }
        }
        initEditor();
    </script>           
</body>
</html>
