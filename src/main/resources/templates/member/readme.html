<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link href="/style/main.css" rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<title>내 정보 보기</title>
<style>
#grade {
	color: black;
}

#grade.bronze {
	color: brown;
}

#grade.silver {
	color: silver;
}

#grade.gold {
	color: gold;
}

#grade.diamond {
	color: deepskyblue;
}
</style>
</head>
<body>
	<div id="app">
		<header th:replace="~{/fragment/header.html}"></header>
		<nav th:replace="~{/fragment/nav.html}"></nav>
		<main>
			<section>
				<form>
					<div class="mb-3 mt-3">
						<label for="username" class="form-label">아이디:</label> <input
							type="text" class="form-control" id="username" name="username"
							th:value="${result.username}" readonly>
					</div>

					<div class="mb-3 mt-3">
						<label for="name" class="form-label">이름:</label> <input
							type="text" class="form-control" id="name" name="name"
							th:value="${result.name}" readonly>
					</div>

					<div class="mb-3 mt-3">
						<label for="email" class="form-label">이메일:</label> <input
							type="email" class="form-control" id="email" name="email"
							th:value="${result.email}"
							pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
							title="유효한 이메일 주소를 입력해주세요.">
					</div>

					<div class="mb-3 mt-3">
						<label for="phone" class="form-label">전화번호:</label> <input
							type="tel" class="form-control" id="phone" name="phone"
							placeholder="010-0000-0000" pattern="\d{3}-\d{3,4}-\d{4}"
							title="010-0000-0000 형식으로 입력해주세요."
							oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\d{3})(\d{3,4})(\d{4})/, '$1-$2-$3');">
					</div>


					<div class="mb-3 mt-3">
						<label for="joinday" class="form-label">가입일:</label>
						<p th:text="${result.joinday}"></p>
					</div>

					<div class="mb-3 mt-3">
						<label for="totalpurchase" class="form-label">총 구매 금액:</label>
						<p th:text="${result.totalpurchase}"></p>
					</div>

					<div class="mb-3 mt-3">
						<label for="grade" class="form-label">회원 등급:</label>
						<p id="grade" th:text="${result.grade}"
							th:classappend="${result.grade.toLowerCase()}"></p>
					</div>

					<div class="mb-3 mt-3">
						<label for="role" class="form-label">회원 역할:</label>
						<p th:text="${result.role}"></p>
					</div>

					<div class="mb-3 mt-3">
						<label for="point" class="form-label">포인트 잔액:</label>
						<p th:text="${result.point}"></p>
					</div>

					<hr>
					<button id="update" class="btn btn-success">변경</button>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<button type="button" id="delete" class="btn btn-danger">삭제</button>
				</form>
			</section>
		</main>
	</div>

	<script>
        $('#delete').click(function() {
            const token = '[[${_csrf.token}]]';
            const form = `
                <form action="/member/withdraw" method="post">
                    <input type="hidden" name="_csrf" value="${token}">
                </form>
            `;
            $(form).appendTo($('body')).submit();
        });
    </script>
</body>
</html>


